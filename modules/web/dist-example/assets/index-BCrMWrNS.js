import{r as A,W as xe,R as d,w as $,a5 as $e,a2 as ee,a4 as R,ay as Ue,o as fe,p as ye,A as Ye,ar as Te,Y as Ee,$ as Pe,as as Qe,a0 as Ze,at as Se,au as qe,az as Xe,z as Je,a7 as et,c as be,u as te,ah as tt,a9 as k,aA as st,aB as at,aC as De,m as D,j as e,B as I,aD as nt,ab as ge,aa as L,a as M,ax as Le,C as K,ao as O,T as H,L as Y,aE as E,b as B,aF as ke,aG as rt}from"./index-XsIMaQZM.js";import{d as U,a as ot}from"./dayjs.min-Cba74Mx1.js";import{u as lt,T as m}from"./Table-Uv2kxH-W.js";import{O as it}from"./OldUserRemark-N5Hj4d0j.js";import{P as ct}from"./Progress-zDC8RuV_.js";import{A as Me}from"./Alert-W4oDJyvt.js";import{I as Ie}from"./IconInfoCircle-rquPA6tK.js";import{a as dt,F as mt}from"./CheckIcon-Cefj2HfO.js";import{B as Ne}from"./Badge-Dw0g8wcf.js";import{g as ut}from"./get-auto-contrast-value-Da6zqqWm.js";var Oe={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const pt=Oe,Ae=A.forwardRef(({__staticSelector:s,__stylesApiProps:r,className:t,classNames:o,styles:u,unstyled:i,children:a,label:n,description:l,id:_,disabled:x,error:w,size:j,labelPosition:N="left",bodyElement:c="div",labelElement:p="label",variant:f,style:y,vars:b,mod:h,...g},C)=>{const S=xe({name:s,props:r,className:t,style:y,classes:Oe,classNames:o,styles:u,unstyled:i});return d.createElement($,{...S("root"),ref:C,__vars:{"--label-fz":$e(j),"--label-lh":ee(j,"label-lh")},mod:[{"label-position":N},h],variant:f,size:j,...g},d.createElement($,{component:c,htmlFor:c==="label"?_:void 0,...S("body")},a,d.createElement("div",{...S("labelWrapper"),"data-disabled":x||void 0},n&&d.createElement($,{component:p,htmlFor:p==="label"?_:void 0,...S("label"),"data-disabled":x||void 0},n),l&&d.createElement(R.Description,{size:j,__inheritStyles:!1,...S("description")},l),w&&w!=="boolean"&&d.createElement(R.Error,{size:j,__inheritStyles:!1,...S("error")},w))))});Ae.displayName="@mantine/core/InlineInput";const Ge=A.createContext(null),ht=Ge.Provider,xt=()=>A.useContext(Ge);function ft({children:s,role:r}){const t=Ue();return t?d.createElement("div",{role:r,"aria-labelledby":t.labelId,"aria-describedby":t.describedBy},s):d.createElement(d.Fragment,null,s)}const yt={},je=fe((s,r)=>{const{value:t,defaultValue:o,onChange:u,size:i,wrapperProps:a,children:n,readOnly:l,..._}=ye("CheckboxGroup",yt,s),[x,w]=Ye({value:t,defaultValue:o,finalValue:[],onChange:u}),j=N=>{const c=N.currentTarget.value;!l&&w(x.includes(c)?x.filter(p=>p!==c):[...x,c])};return d.createElement(ht,{value:{value:x,onChange:j,size:i}},d.createElement(R.Wrapper,{size:i,ref:r,...a,..._,labelElement:"div",__staticSelector:"CheckboxGroup"},d.createElement(ft,{role:"group"},n)))});je.classes=R.Wrapper.classes;je.displayName="@mantine/core/CheckboxGroup";var We={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const bt={labelPosition:"right",icon:dt},gt=Pe((s,{radius:r,color:t,size:o,iconColor:u,variant:i,autoContrast:a})=>{const n=Qe({color:t||s.primaryColor,theme:s}),l=n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-outline)`:n.color;return{root:{"--checkbox-size":ee(o,"checkbox-size"),"--checkbox-radius":r===void 0?void 0:Ze(r),"--checkbox-color":i==="outline"?l:Se(t,s),"--checkbox-icon-color":u?Se(u,s):ut(a,s)?qe({color:t,theme:s}):void 0}}}),Q=fe((s,r)=>{const t=ye("Checkbox",bt,s),{classNames:o,className:u,style:i,styles:a,unstyled:n,vars:l,color:_,label:x,id:w,size:j,radius:N,wrapperProps:c,children:p,checked:f,labelPosition:y,description:b,error:h,disabled:g,variant:C,indeterminate:S,icon:se,rootRef:ae,iconColor:ne,onChange:G,autoContrast:Ce,mod:re,...oe}=t,z=xt(),le=j||(z==null?void 0:z.size),ie=se,W=xe({name:"Checkbox",props:t,classes:We,className:u,style:i,classNames:o,styles:a,unstyled:n,vars:l,varsResolver:gt}),{styleProps:v,rest:Z}=Te(oe),q=Ee(w),X=z?{checked:z.value.includes(Z.value),onChange:J=>{z.onChange(J),G==null||G(J)}}:{};return d.createElement(Ae,{...W("root"),__staticSelector:"Checkbox",__stylesApiProps:t,id:q,size:le,labelPosition:y,label:x,description:b,error:h,disabled:g,classNames:o,styles:a,unstyled:n,"data-checked":X.checked||f||void 0,variant:C,ref:ae,mod:re,...v,...c},d.createElement($,{...W("inner"),mod:{"data-label-position":y}},d.createElement($,{component:"input",id:q,ref:r,checked:f,disabled:g,mod:{error:!!h,indeterminate:S},...W("input",{focusable:!0,variant:C}),onChange:G,...Z,...X,type:"checkbox"}),d.createElement(ie,{indeterminate:S,...W("icon")})))});Q.classes={...We,...pt};Q.displayName="@mantine/core/Checkbox";Q.Group=je;const jt=({reveal:s})=>d.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{width:"var(--psi-icon-size)",height:"var(--psi-icon-size)"}},d.createElement("path",{d:s?"M13.3536 2.35355C13.5488 2.15829 13.5488 1.84171 13.3536 1.64645C13.1583 1.45118 12.8417 1.45118 12.6464 1.64645L10.6828 3.61012C9.70652 3.21671 8.63759 3 7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C0.902945 9.08812 2.02314 10.1861 3.36061 10.9323L1.64645 12.6464C1.45118 12.8417 1.45118 13.1583 1.64645 13.3536C1.84171 13.5488 2.15829 13.5488 2.35355 13.3536L4.31723 11.3899C5.29348 11.7833 6.36241 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C14.0971 5.9119 12.9769 4.81391 11.6394 4.06771L13.3536 2.35355ZM9.90428 4.38861C9.15332 4.1361 8.34759 4 7.5 4C4.80285 4 2.52952 5.37816 1.09622 7.50001C1.87284 8.6497 2.89609 9.58106 4.09974 10.1931L9.90428 4.38861ZM5.09572 10.6114L10.9003 4.80685C12.1039 5.41894 13.1272 6.35031 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11C6.65241 11 5.84668 10.8639 5.09572 10.6114Z":"M7.5 11C4.80285 11 2.52952 9.62184 1.09622 7.50001C2.52952 5.37816 4.80285 4 7.5 4C10.1971 4 12.4705 5.37816 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11ZM7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C1.65639 10.2936 4.30786 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C13.3436 4.70638 10.6921 3 7.5 3ZM7.5 9.5C8.60457 9.5 9.5 8.60457 9.5 7.5C9.5 6.39543 8.60457 5.5 7.5 5.5C6.39543 5.5 5.5 6.39543 5.5 7.5C5.5 8.60457 6.39543 9.5 7.5 9.5Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}));var he={root:"m_f61ca620",input:"m_ccf8da4c",innerInput:"m_f2d85dd2",visibilityToggle:"m_b1072d44"};const Ct={visibilityToggleIcon:jt},vt=Pe((s,{size:r})=>({root:{"--psi-icon-size":ee(r,"psi-icon-size"),"--psi-button-size":ee(r,"psi-button-size")}})),P=fe((s,r)=>{const t=ye("PasswordInput",Ct,s),{classNames:o,className:u,style:i,styles:a,unstyled:n,vars:l,required:_,error:x,leftSection:w,disabled:j,id:N,variant:c,inputContainer:p,description:f,label:y,size:b,errorProps:h,descriptionProps:g,labelProps:C,withAsterisk:S,inputWrapperOrder:se,wrapperProps:ae,radius:ne,rightSection:G,rightSectionWidth:Ce,rightSectionPointerEvents:re,leftSectionWidth:oe,visible:z,defaultVisible:le,onVisibilityChange:ie,visibilityToggleIcon:W,visibilityToggleButtonProps:v,rightSectionProps:Z,leftSectionProps:q,leftSectionPointerEvents:X,mod:J,...Re}=t,ce=Ee(N),[de,Ve]=Ye({value:z,defaultValue:le,finalValue:!1,onChange:ie}),ve=()=>Ve(!de),me=xe({name:"PasswordInput",classes:he,props:t,className:u,style:i,classNames:o,styles:a,unstyled:n,vars:l,varsResolver:vt}),{resolvedClassNames:ue,resolvedStyles:_e}=lt({classNames:o,styles:a,props:t}),{styleProps:Be,rest:we}=Te(Re),Ke=W,He=d.createElement(Xe,{...me("visibilityToggle"),disabled:j,radius:ne,"aria-hidden":!v,tabIndex:-1,...v,variant:"subtle",color:"gray",unstyled:n,onMouseDown:F=>{var V;F.preventDefault(),(V=v==null?void 0:v.onMouseDown)==null||V.call(v,F),ve()},onKeyDown:F=>{var V;(V=v==null?void 0:v.onKeyDown)==null||V.call(v,F),F.key===" "&&(F.preventDefault(),ve())}},d.createElement(Ke,{reveal:de}));return d.createElement(R.Wrapper,{required:_,id:ce,label:y,error:x,description:f,size:b,classNames:ue,styles:_e,__staticSelector:"PasswordInput",errorProps:h,descriptionProps:g,unstyled:n,withAsterisk:S,inputWrapperOrder:se,inputContainer:p,variant:c,labelProps:{...C,htmlFor:ce},mod:J,...me("root"),...Be,...ae},d.createElement(R,{component:"div",error:x,leftSection:w,size:b,classNames:{...ue,input:Je(he.input,ue.input)},styles:_e,radius:ne,disabled:j,__staticSelector:"PasswordInput",rightSectionWidth:Ce,rightSection:G??He,variant:c,unstyled:n,leftSectionWidth:oe,rightSectionPointerEvents:re||"all",rightSectionProps:Z,leftSectionProps:q,leftSectionPointerEvents:X,withAria:!1},d.createElement("input",{required:_,"data-invalid":!!x||void 0,"data-with-left-section":!!w||void 0,...me("innerInput"),disabled:j,id:ce,ref:r,...we,autoComplete:we.autoComplete||"off",type:de?"text":"password"})))});P.classes={...et.classes,...he};P.displayName="@mantine/core/PasswordInput";/**
 * @license @tabler/icons-react v3.3.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _t=be("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.3.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wt=be("outline","calendar-bolt","IconCalendarBolt",[["path",{d:"M13.5 21h-7.5a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v5",key:"svg-0"}],["path",{d:"M16 3v4",key:"svg-1"}],["path",{d:"M8 3v4",key:"svg-2"}],["path",{d:"M4 11h16",key:"svg-3"}],["path",{d:"M19 16l-2 3h4l-2 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.3.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var St=be("outline","message-bolt","IconMessageBolt",[["path",{d:"M8 9h8",key:"svg-0"}],["path",{d:"M8 13h6",key:"svg-1"}],["path",{d:"M13 18l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v5.5",key:"svg-2"}],["path",{d:"M19 16l-2 3h4l-2 3",key:"svg-3"}]]);const kt="_title_19onm_1",T={title:kt};let Mt=()=>{let s=te().location.search;return tt.parse(s)};const ze=s=>{if(!s){k.alertErr("无法处理登录结果");return}st()(at.actions.updateOneOfParamState({showLoginModal:!1})),De.saveCredentialToken(s)};function It(s){const[r,t]=D.useLazyEnableGiftCardQuery({}),o=s.cardList,u=te(),i=o.map(a=>e.jsxs(m.Tr,{children:[e.jsx(m.Td,{children:{THANKS_FOR_FUNDRAISING:"永久会员权益卡",WX_PAY:"付费会员权益卡"}[a.giftCardType]||"通用"}),e.jsx(m.Td,{children:a.giftCardCode}),e.jsx(m.Td,{children:a.enabled?"已启用":"未启用"}),e.jsx(m.Td,{children:a.totalDays<365||a.totalDays%365!=0?`${a.totalDays}天`:`${a.totalDays/365}年`}),e.jsx(m.Td,{children:a.enabled?U(a.fromDateTime).format("YYYY-MM-DD"):"N/A"}),e.jsx(m.Td,{children:a.enabled?U(a.toDateTime).format("YYYY-MM-DD"):"N/A"}),e.jsx(m.Td,{children:U(a.createdAt).format("YYYY-MM-DD")}),e.jsx(m.Td,{children:e.jsx("div",{className:"space-x-2",children:a.usedByWho<1?e.jsx(I,{loading:t.isLoading,size:"compact-sm",color:"green",onClick:async()=>{r({giftCardCode:a.giftCardCode+""}).then(n=>{s.refreshNow()})},children:"立即激活"}):e.jsx(I,{size:"compact-sm",color:"cyan",onClick:async()=>{k.alertInfo("很抱歉，让您到售后服务寻求支持。为了更快处理您的工单，建议通过QQ群联系我们"),u.push("/settings/feedback")},children:"售后咨询"})})})]},a.id));return e.jsx(m.ScrollContainer,{minWidth:800,children:e.jsxs(m,{verticalSpacing:"xs",children:[e.jsx(m.Thead,{children:e.jsxs(m.Tr,{children:[e.jsx(m.Th,{children:"类型"}),e.jsx(m.Th,{children:"礼品卡"}),e.jsx(m.Th,{children:"状态"}),e.jsx(m.Th,{children:"有效期"}),e.jsx(m.Th,{children:"开始时间"}),e.jsx(m.Th,{children:"结束时间"}),e.jsx(m.Th,{children:"创建日期"}),e.jsx(m.Th,{align:"center",children:"操作"})]})}),e.jsx(m.Tbody,{children:i})]})})}var Nt={exports:{}};(function(s,r){(function(t,o){s.exports=o(ot)})(nt,function(t){function o(a){return a&&typeof a=="object"&&"default"in a?a:{default:a}}var u=o(t),i={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(a,n){return n==="W"?a+"周":a+"日"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},meridiem:function(a,n){var l=100*a+n;return l<600?"凌晨":l<900?"早上":l<1100?"上午":l<1300?"中午":l<1800?"下午":"晚上"}};return u.default.locale(i,null,!0),i})})(Nt);U.locale("zh-cn");const zt=s=>s?U(s).format("YYYY年MM月DD日 dddd HH:mm:ss"):"N/A",pe=s=>({onKeyDown:r=>{r.key=="Enter"&&r.preventDefault()},onSubmit:s}),Yt=()=>{var o,u,i,a,n;const s=D.useGetFurtherAcctDetailQuery({initCount:ge.useSelector(l=>l.settings.initCount)},{});if(!((o=s.data)!=null&&o.data))return"";const r=(i=(u=s.data)==null?void 0:u.data)==null?void 0:i.totalTokenCount,t=((n=(a=s.data)==null?void 0:a.data)==null?void 0:n.usedTokenCount)||0;return e.jsxs(L,{wrap:"nowrap",gap:10,mt:5,children:[e.jsx(St,{stroke:1.5,size:"1rem",className:T.icon}),e.jsx(M,{fz:"xs",c:"dimmed",className:"flex ",children:"本月Token用量:"}),e.jsx(ct,{title:`${t}/${r}`,value:Math.max(0,t/r),style:{width:"120px"}})]})},Fe=s=>{var i,a,n,l,_;const r=Le(),t=D.useGetGiftCardListQuery({},{skip:!r,pollingInterval:5e3,refetchOnFocus:!0});A.useEffect(()=>{t.isSuccess&&t.refetch()},[te().location.pathname]);const o=ge.useSelector(x=>x.users),u=((i=t==null?void 0:t.data)==null?void 0:i.data)||[];return e.jsxs(K,{my:10,size:"xl",className:" block justify-start items-start sm:space-x-4 "+(s.noSidebar?"  sm:flex flex-col   ":"  sm:flex flex-row  "),children:[e.jsx("div",{className:"flex-1 mb-5 "+(s.noSidebar?" sm:w-full ":" sm:w-[calc(100%-350px)] "),style:{},children:e.jsxs(O,{withBorder:!0,shadow:"md",p:10,radius:"md",children:[e.jsx(H,{size:"xl",mb:3,children:"礼品卡列表"}),e.jsx(It,{refreshNow:()=>{t.refetch()},cardList:u}),e.jsx(Me,{mb:10,variant:"light",color:"green",title:"关于礼品卡兑换、赠与功能的说明",icon:e.jsx(Ie,{}),children:"我们已经自动发放礼品卡到每个老用户的账号里，具体数据如上，您可以查看您的礼品卡信息，如您有任何问题，请随时联系我们。 但目前来说，系统还没有开放兑换礼品卡的接口，此功能还在内测中，此功能将在测试通过后上线。等到该功能上线成功后，您可以将此礼品卡自己兑换、赠与给他人等操作。"}),e.jsx(Me,{variant:"light",color:"blue",title:"关于会员礼品卡权益的说明",icon:e.jsx(Ie,{}),children:e.jsx(it,{})})]})}),e.jsxs(mt,{dir:"col",className:"flex flex-col "+(s.noSidebar?" ":" sm:w-[350px] "),children:[e.jsx(O,{withBorder:!0,shadow:"md",p:30,radius:"md",children:e.jsx(L,{wrap:"nowrap",children:e.jsxs("div",{children:[e.jsxs(M,{fz:"lg",fw:500,className:T.name,children:[((a=o.userInfo)==null?void 0:a.name)||"N/A","     ",(n=o.userInfo)!=null&&n.isProUser?e.jsx(Ne,{size:"sm",color:"pink",variant:"light",children:"专业版用户"}):e.jsx(Ne,{size:"sm",color:"green",variant:"light",children:"开源版用户"})]}),e.jsxs(L,{wrap:"nowrap",gap:10,mt:3,children:[e.jsx(_t,{stroke:1.5,size:"1rem",className:T.icon}),e.jsx(M,{fz:"xs",c:"dimmed",children:(l=o.userInfo)==null?void 0:l.email})]}),e.jsxs(L,{wrap:"nowrap",gap:10,mt:5,children:[e.jsx(wt,{stroke:1.5,size:"1rem",className:T.icon}),e.jsxs(M,{fz:"xs",c:"dimmed",children:["加入于 ",zt(new Date((_=o.userInfo)==null?void 0:_.createdAt))]})]}),e.jsx(Yt,{})]})})}),e.jsx(O,{withBorder:!0,shadow:"md",p:10,mt:10,radius:"md",children:e.jsxs(L,{flex:"flex-col space-y-3",children:[e.jsx(Y,{className:"w-full",to:"/settings/my-account?type=find-pw",children:e.jsx(I,{fullWidth:!0,color:"indigo",onClick:()=>{},children:"修改密码"})}),e.jsx(Y,{className:"w-full",to:"/settings/feedback",children:e.jsx(I,{fullWidth:!0,color:"blue",onClick:()=>{k.alertInfo("很抱歉让您来到账号申诉板块，如果您在账号使用过程中，发现用户权益与预期不一致，或者数据不一致，请随时联系我们，我们将为您排查并尽快处理。")},children:"账号申诉"})}),e.jsx(I,{className:"w-full",color:"pink",onClick:()=>{De.signOut()},children:"用户登出"})]})})]})]})};function Tt(){let s=Mt();const r=te(),t=ge.register("myaccount",{getPersistedStateFn:()=>({temp:1}),getNotPersistedStateFn:()=>({vcode:"",userName:"",email:"",password:"",confirmPassword:"",rememberMe:"on",agreeOrNot:"on"})}),[o]=D.useLazySignInQuery({}),[u]=D.useLazySignUpQuery({}),[i]=D.useLazyTellMeVCode4FindPwQuery({}),[a]=D.useLazyMailFindPwQuery({}),[n,l]=A.useState(!1),[_,x]=A.useState(!1),[w,j]=A.useState(""),N=Le();if(!t)return"";if(N&&s.type!="find-pw")return e.jsx(Fe,{});switch(s.type){case"find-pw":return n?e.jsx(K,{size:420,my:40,children:e.jsxs("div",{...pe(()=>{}),children:[e.jsx(H,{ta:"center",className:T.title,children:"确认邮箱验证码"}),e.jsxs(M,{c:"dimmed",size:"sm",ta:"center",mt:5,children:["我们已发送邮箱 到 ",w,"，请查收并输入验证码。  如若没有收到邮件，请先 检查垃圾箱 或者"," ",e.jsx(E,{type:"button",size:"sm",component:"button",onClick:()=>{l(!1)},children:"重新发送"})]}),e.jsxs(O,{withBorder:!0,shadow:"md",p:30,mt:30,radius:"md",children:[e.jsx(B,{type:"number",...t==null?void 0:t.bindOnChange({npStateKey:"vcode"}),name:"vcode",label:"6位数字验证码",placeholder:"输入以确认本次重置操作",mt:"md"}),e.jsx(I,{onClick:async c=>{var p,f,y;try{if(c.preventDefault(),(y=(f=(await i({email:w,vcode:(p=t==null?void 0:t.npState)==null?void 0:p.vcode})).data)==null?void 0:f.data)!=null&&y.verified)k.alertSuccess("重置成功，将跳转到登录界面"),r.push("/settings/my-account?type=signin"),rt();else throw new Error("验证码错误，请重新输入")}catch(b){k.alertErr(b)}},fullWidth:!0,mt:"xl",color:"violet",children:"确认重置"})]})]})}):e.jsx(K,{size:420,my:40,children:e.jsxs("div",{...pe(()=>{}),children:[e.jsx(H,{ta:"center",className:T.title,children:"找回密码"}),e.jsx(M,{c:"dimmed",size:"sm",ta:"center",mt:5,children:"人工协助请写信至邮箱 work7z@outlook.com"}),e.jsxs(M,{c:"dimmed",size:"sm",ta:"center",mt:5,children:["想起密码了？"," ",e.jsx(Y,{to:"/settings/my-account?type=signin",children:e.jsx(E,{type:"button",size:"sm",component:"button",children:"返回登录"})})]}),e.jsxs(O,{withBorder:!0,shadow:"md",p:30,mt:30,radius:"md",children:[e.jsx(B,{...t==null?void 0:t.bindOnChange({npStateKey:"email"}),name:"email",label:"注册Email地址",placeholder:"请填写当时注册用的Email"}),e.jsx(P,{...t==null?void 0:t.bindOnChange({npStateKey:"password"}),name:"password",label:"新密码",placeholder:"请让新密码尽可能复杂",mt:"md"}),e.jsx(P,{...t==null?void 0:t.bindOnChange({npStateKey:"confirmPassword"}),name:"confirmPassword",label:"确认新密码",placeholder:"再次确认您的新密码",mt:"md"}),e.jsx(I,{onClick:async c=>{var p,f,y,b;try{x(!0),c.preventDefault();let h=(p=t==null?void 0:t.npState)==null?void 0:p.password,g=(f=t==null?void 0:t.npState)==null?void 0:f.confirmPassword;if(h!=g)throw new Error("两次密码不一致，请重新输入");if(!h||!g)throw new Error("密码不能为空");let C=(y=t==null?void 0:t.npState)==null?void 0:y.email;if(!C)throw new Error("邮箱不能为空");let S=await a({email:C,password:h,confirmPassword:g});k.alertSuccess("重置密码邮件已发送，请查收，有效期30分钟"),j((b=t==null?void 0:t.npState)==null?void 0:b.email),l(!0)}catch(h){k.alertErr(h)}finally{x(!1)}},loading:_,fullWidth:!0,mt:"xl",color:"violet",children:"发送重置密码邮件"})]})]})});case"signup":return e.jsx(K,{size:420,my:40,children:e.jsxs("div",{...pe(()=>{}),children:[e.jsx(H,{ta:"center",className:T.title,children:"注册新用户"}),e.jsxs(M,{c:"dimmed",size:"sm",ta:"center",mt:5,children:["已经有账户了？"," ",e.jsx(Y,{to:"/settings/my-account?type=signin",children:e.jsx(E,{type:"button",size:"sm",component:"button",children:"立即登录"})})]}),e.jsxs(O,{withBorder:!0,shadow:"md",p:30,mt:30,radius:"md",children:[e.jsx(B,{...t==null?void 0:t.bindOnChange({npStateKey:"userName"}),label:"用户名",placeholder:"mina"}),e.jsx(B,{label:"Email",...t==null?void 0:t.bindOnChange({npStateKey:"email"}),name:"email",placeholder:"mina@gmail.com",mt:"md"}),e.jsx(P,{...t==null?void 0:t.bindOnChange({npStateKey:"password"}),label:"密码",name:"password",placeholder:"请让密码尽可能复杂",mt:"md"}),e.jsx(P,{...t==null?void 0:t.bindOnChange({npStateKey:"confirmPassword"}),label:"确认密码",name:"confirmPassword",placeholder:"再次确认您本次设定的密码",mt:"md"}),e.jsx(L,{justify:"space-between",mt:"lg",children:e.jsx(Q,{...t==null?void 0:t.bindOnChange({npStateKey:"agreeOrNot"}),defaultChecked:!0,onChange:c=>{t.updateNonPState({agreeOrNot:c.target.checked?"on":"off"})},name:"agreeOrNot",label:e.jsxs(M,{size:"sm",className:"text-xs",children:["我已经阅读并同意 ",e.jsx(Y,{to:"/settings/terms-of-conditions",target:"_blank",children:e.jsx(E,{type:"button",size:"xs",children:"《服务条款》"})})," 和",e.jsx(Y,{to:"/settings/privacy-agreement",target:"_blank",children:e.jsx(E,{type:"button",size:"xs",children:"《隐私保护协议》"})})]})})}),e.jsx(I,{onClick:async c=>{var p,f,y,b,h,g;try{if(c.preventDefault(),((p=t.npState)==null?void 0:p.agreeOrNot)!="on"){k.alertErr("请先同意服务条款和隐私保护协议");return}let C=await u({preview:!1,rememberMe:!0,userName:(f=t==null?void 0:t.npState)==null?void 0:f.userName,email:(y=t==null?void 0:t.npState)==null?void 0:y.email,password:(b=t==null?void 0:t.npState)==null?void 0:b.password,confirmPassword:(h=t==null?void 0:t.npState)==null?void 0:h.confirmPassword});ke(C.data)&&(k.alertSuccess("恭喜，注册成功！"),ze((g=C.data)==null?void 0:g.data))}catch(C){k.alertErr(C)}},fullWidth:!0,mt:"xl",color:"lime",children:"免费注册"})]})]})});default:return e.jsx(K,{size:420,my:40,children:e.jsxs("div",{children:[e.jsx(H,{ta:"center",className:T.title,children:"登录系统"}),e.jsxs(M,{c:"dimmed",size:"sm",ta:"center",mt:5,children:["提示密码不正确？"," ",e.jsx(Y,{to:"/settings/my-account?type=find-pw",children:e.jsx(E,{type:"button",component:"button",size:"sm",children:"找回密码"})})]}),e.jsxs(O,{withBorder:!0,shadow:"md",p:30,mt:30,radius:"md",children:[e.jsx(B,{...t==null?void 0:t.bindOnChange({npStateKey:"userName"}),name:"userName",label:"用户名/Email地址",placeholder:"mina 或 mina@gmail.com"}),e.jsx(P,{...t==null?void 0:t.bindOnChange({npStateKey:"password"}),name:"password",label:"密码",placeholder:"用户密码",mt:"md"}),e.jsxs(L,{justify:"space-between",mt:"lg",children:[e.jsx(Q,{...t==null?void 0:t.bindOnChange({npStateKey:"rememberMe"}),onChange:c=>{t.updateNonPState({rememberMe:c.target.checked?"on":"off"})},name:"rememberMe",defaultChecked:!0,label:"记住这台设备"}),e.jsx(Y,{to:"/settings/my-account?type=signup",children:e.jsx(E,{type:"button",size:"sm",component:"button",children:"免费注册"})})]}),e.jsx(I,{fullWidth:!0,mt:"xl",onClick:async c=>{var p,f,y,b;try{c.preventDefault();let h=((p=t==null?void 0:t.npState)==null?void 0:p.rememberMe)=="on",g=await o({rememberMe:!!h,userName:(f=t==null?void 0:t.npState)==null?void 0:f.userName,password:(y=t==null?void 0:t.npState)==null?void 0:y.password});ke(g.data)&&(k.alertSuccess("登录成功，欢迎回来"),ze((b=g.data)==null?void 0:b.data))}catch(h){k.alertErr(h)}},children:"登录"})]})]})})}}const Et=()=>e.jsx("div",{children:e.jsx(Tt,{})}),Bt=Object.freeze(Object.defineProperty({__proto__:null,GiftCardDIV:Fe,default:Et},Symbol.toStringTag,{value:"Module"}));export{Fe as G,ft as I,Ae as a,Bt as i};
